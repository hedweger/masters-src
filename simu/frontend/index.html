<!doctype html>
<html>
  <head>
    <title>VM Deployment Dashboard</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  </head>
  <body>
    <h1>VM Deployment Service</h1>

    <div id="deployment-form">
      <form
        hx-post="/api/deploy"
        hx-target="#deployment-status"
        hx-swap="innerHTML"
      >
        <div>
          <label for="config_path">Configuration File Path:</label>
          <input
            type="text"
            id="config_path"
            name="config_path"
            value="config-test.yaml"
            required
          />
        </div>
        <div>
          <label for="output_dir">Output Directory:</label>
          <input type="text" id="output_dir" name="output_dir" value="" />
        </div>
        <button type="submit">Deploy VMs</button>
      </form>
    </div>

    <div
      id="deployment-status"
      hx-get="/api/deploy/status"
      hx-trigger="every 2s"
      hx-swap="innerHTML"
    ></div>

    <h2>Upload SCD File</h2>
    <form
      hx-post="/api/scd/upload"
      hx-target="#xmlBox"
      hx-trigger="change from:#scdFileInput"
      hx-encoding="multipart/form-data"
      hx-swap="innerHTML"
    >
      <div style="display: flex; flex-direction: row">
        <div style="display: flex; flex-direction: column">
          <input
            type="file"
            name="scdfile"
            accept=".scd,.xml"
            id="scdFileInput"
            required
          />
          <button
            hx-get="/api/scd/view"
            hx-target="#xmlBox"
            hx-swap="innerHTML"
          >
            View config
          </button>
          <button
            hx-get="/api/scd/model"
            hx-target="#xmlBox"
            hx-swap="innerHTML"
          >
            View Model
          </button>
        </div>
        <textarea id="xmlBox" rows="20" cols="80" readonly></textarea>
      </div>
    </form>
  </body>
</html>
